Code : service/ProduitService.java
package com.example.pizzarecipes.service;

import com.example.pizzarecipes.classes.Produit;
import com.example.pizzarecipes.dao.IDao;
import com.example.pizzarecipes.R;

import java.util.ArrayList;
import java.util.Collections;
import java.util.List;

public class ProduitService implements IDao<Produit> {

    // Singleton
    private static ProduitService INSTANCE;

    // Data storage
    private final List<Produit> data = new ArrayList<>();

    // Private constructor
    private ProduitService() {
        seed();
    }

    // Get instance
    public static ProduitService getInstance() {
        if (INSTANCE == null) {
            INSTANCE = new ProduitService();
        }
        return INSTANCE;
    }

    // Helper method to simplify adding pizzas
    private void addPizza(String nom, double prix, int img, String duree,
                          String ingredients, String description, String etapes) {
        data.add(new Produit(nom, prix, img, duree, ingredients, description, etapes));
    }

    // Seed initial data
    private void seed() {

        addPizza("BARBECUED CHICKEN PIZZA", 3, R.mipmap.pizza1, "35 min",
                "- Chicken breast\n- Barbecue sauce\n- Cheese",
                "Pizza au poulet barbecue simple et rapide.",
                "STEP 1: Griller le poulet\nSTEP 2: Garnir et cuire");

        addPizza("BRUSCHETTA PIZZA", 5, R.mipmap.pizza2, "35 min",
                "- Sausage\n- Mozzarella\n- Tomatoes\n- Basil",
                "Pizza italienne riche en saveur.",
                "STEP 1: Cuire la viande\nSTEP 2: Ajouter garniture\nSTEP 3: Cuire");

        addPizza("SPINACH PIZZA", 2, R.mipmap.pizza3, "25 min",
                "- Alfredo sauce\n- Spinach\n- Cheese",
                "Pizza végétarienne légère.",
                "STEP 1: Étaler pâte\nSTEP 2: Ajouter ingrédients\nSTEP 3: Cuire");

        addPizza("DEEP-DISH SAUSAGE PIZZA", 8, R.mipmap.pizza4, "45 min",
                "- Sausage\n- Fromage\n- Sauce tomate",
                "Pizza épaisse façon américaine.",
                "STEP 1: Préparer la pâte\nSTEP 2: Ajouter couches\nSTEP 3: Cuire");

        addPizza("HOMEMADE PIZZA", 4, R.mipmap.pizza5, "50 min",
                "- Boeuf\n- Oignon\n- Sauce tomate\n- Fromage",
                "Pizza maison classique.",
                "STEP 1: Préparer pâte\nSTEP 2: Ajouter garniture\nSTEP 3: Cuire");

        addPizza("PESTO CHICKEN PIZZA", 3, R.mipmap.pizza6, "50 min",
                "- Poulet\n- Pesto\n- Fromage",
                "Pizza au pesto savoureuse.",
                "STEP 1: Préparer pâte\nSTEP 2: Ajouter poulet et pesto\nSTEP 3: Cuire");

        addPizza("LOADED MEXICAN PIZZA", 3, R.mipmap.pizza7, "30 min",
                "- Haricots noirs\n- Piments\n- Fromage",
                "Pizza style mexicain épicée.",
                "STEP 1: Préparer mélange\nSTEP 2: Garnir\nSTEP 3: Cuire");

        addPizza("BACON CHEESEBURGER PIZZA", 2, R.mipmap.pizza8, "20 min",
                "- Boeuf\n- Bacon\n- Fromage",
                "Pizza goût cheeseburger.",
                "STEP 1: Cuire viande\nSTEP 2: Ajouter fromage\nSTEP 3: Cuire");

        addPizza("PIZZA MARGHERITA", 1, R.mipmap.pizza9, "30 min",
                "- Tomates\n- Mozzarella\n- Basilic",
                "Pizza italienne classique.",
                "STEP 1: Préparer pâte\nSTEP 2: Ajouter ingrédients\nSTEP 3: Cuire");

        addPizza("PEPPERONI STUFFED PIZZA", 5, R.mipmap.pizza10, "45 min",
                "- Pepperoni\n- Fromage\n- Sauce",
                "Pizza farcie riche.",
                "STEP 1: Préparer pâte\nSTEP 2: Ajouter farce\nSTEP 3: Cuire");
    }

    // ================= CRUD =================

    @Override
    public Produit create(Produit p) {
        data.add(p);
        return p;
    }

    @Override
    public Produit update(Produit p) {
        for (int i = 0; i < data.size(); i++) {
            if (data.get(i).getId() == p.getId()) {
                data.set(i, p);
                return p;
            }
        }
        return null;
    }

    @Override
    public boolean delete(long id) {
        return data.removeIf(x -> x.getId() == id);
    }

    @Override
    public Produit findById(long id) {
        for (Produit p : data) {
            if (p.getId() == id) return p;
        }
        return null;
    }

    @Override
    public List<Produit> findAll() {
        return Collections.unmodifiableList(data);
    }
}